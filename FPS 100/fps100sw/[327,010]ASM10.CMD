; ASM10.CMD - INSTALL ASM100 COMMAND FILE
; RSX11M FPS100 FEB 80
; ASM100.FTN
; LIB100 MUST BE BUILT AND IN PLACE
;
 .ENABLE GLOBAL
 .ENABLE SUBSTITUTION
 .IFDF $MAST .GOTO 10
; SETUP
 @SETUP
;
 .10:
;
; COMPILE ASM100
;
 .IFINS FOR FOR ASM100=ASM100'$FOR1'
 .IFINS F4P F4P ASM100=ASM100'$F4P1'
;
; CREATE ASM100 LIBRARY
;
 LBR ASM100/CR=ASM100
;
; TASK BUILD ASM100
;
 .OPEN ASM100.CMD
 .DATA ASM100/CP,ASM100=ASM100/MP
 .DATA UNITS=12
 .DATA ACTFIL=6
 .DATA //
 .CLOSE
   .OPEN ASM100.ODL
  .DATA  ;BUILDS THE OVERLAY STRUCTURE FOR THE AP ASSEMBLER
  .DATA ; THE ROOT CONTAINS MUST OF THE COMMON ROUTINES USED BY BOTH
 .DATA ; PASS 1 AND PASS 2 OF THE ASSEMBLER
  .DATA ; BRNCH1 IS THE INITIALIZATION PHASE OF THE ASSEMBLER
  .DATA  ;BRNCH2 IS PASS 1
 .DATA  ; BRNCH3 IS PASS 2
  .DATA ; EACH ROUTINE FROM THE ASSEMBLER (ASM100) LIBRARY IS SPECIFILY
  .DATA  ; CALLED OUT TO BE LOADED IN IT.S PROPER PLACE
 .DATA  ;
  .DATA ; BUILD THE BASIC STRUCTURE
  .DATA ;
   .DATA     .ROOT ROOT-*(BRNCH1,BRNCH2,BRNCH3)
 .DATA ;
 .DATA ; SPECIFY THE ROUTINES FOR THE ROOT
   .DATA R1: .FCTR ASM100/LB:.MAIN.:TABLES:OPTAB
   .DATA R2: .FCTR ASM100/LB:ERRMES:EXFLDS:FUSYM:GLINE:GNUM:GSYM:GVAL
   .DATA R3:.FCTR ASM100/LB:PNUM:WLIN:GBRK:READLN:FLOAT2:PACKS
  .DATA R4: .FCTR LB:'$LUIC'LIB100/LB:DUTIL:ICMP16:IPFIX:ISUB16:NEGCHK
   .DATA R5: .FCTR LB:'$LUIC'LIB100/LB:INEG16:PFLOAT:IADDC:DATTIM
   .DATA R6:  .FCTR  LB:'$LUIC'LIB100/LB:INFILE:PAKS
   .DATA ROOT: .FCTR R1-R4-R5-R6
 .DATA ;
 .DATA ;  BUILD THE INITIALIZATION OVERLAY
   .DATA BRNCH1: .FCTR ASM100/LB:APALI:LENGTH-LB:'$LUIC'LIB100/LB
  .DATA ;
  .DATA ;  BUILD PASS 1 BASE OVERLAY
   .DATA BRNCH2: .FCTR BRCH2-(LIMB21,LIMB22)
  .DATA BRCH2: .FCTR ASM100/LB:PASS1:LENGTH:ITAS-R2-R3-LB:'$LUIC'LIB100/LB
   .DATA LIMB21: .FCTR ASM100/LB:FPGET
   .DATA LIMB22: .FCTR ASM100/LB:SNDMES:HEADER
 .DATA ;
 .DATA ;  BUILD PASS 1 BRANCH OF THE TREE
   .DATA BRNCH3: .FCTR BRCH3-(LIMB31,LIMB32,LIMB33,LIMB34)
   .DATA BRCH3: .FCTR ASM100/LB:PASS2:FSYM-R2-R3
   .DATA LIMB31: .FCTR ASM100/LB:FPGET
   .DATA LIMB32: .FCTR ASM100/LB:SNDMES:HEADER
   .DATA LIMB33: .FCTR ASM100/LB:GFIELD:GARG
   .DATA LIMB34: .FCTR ASM100/LB:RTOE:TYPCHR:ITAS
   .DATA   .END
    .CLOSE
 TKB @ASM100
 PIP ASM100.TSK/PU
;
; DELETE INTERMEDIATE FILES
;
 PIP ASM100.OLB;*,ASM100.OBJ;*,ASM100.CMD;*,ASM100.ODL;*/DE
 .EXIT
