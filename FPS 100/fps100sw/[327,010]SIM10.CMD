; SIM10.CMD - INSTALL SIM100 COMMAND FILE
; RSX11M FPS100 FEB 80
; SIM100.FTN
; LIB100 MUST BE BUILT AND IN PLACE
;
 .ENABLE GLOBAL
 .ENABLE SUBSTITUTION
 .IFDF $MAST .GOTO 10
; SETUP
 @SETUP
;
 .10:
;
; COMPILE SIM100
;
 .IFINS FOR FOR SIM100=SIM100'$FOR2'
 .IFINS F4P F4P SIM100=SIM100'$F4P2'
;
; CREATE SIM100 LIBRARY
;
 LBR SIM100/CR=SIM100
;
; TASK BUILD SIM100
;
    .OPEN  SIM100.CMD
   .DATA  SIM100/CP,SIM100=SIM100/MP
    .DATA UNITS=17
   .DATA //
   .CLOSE
   .OPEN  SIM100.ODL
   .DATA  .ROOT  ROOT-*(BRNCH1,BRNCH2)
  .DATA ROOT1: .FCTR SIM100/LB:.MAIN.:TMROM:DBGSYM:PSMEM:MDMEM:UNPKRG
  .DATA  ROOT2: .FCTR SIM100/LB:RMOV:TMMEM:MOVPRT:MREAD:MWRIT
  .DATA  ROOT3: .FCTR SIM100/LB:NEGATE:NORMAL:SPLIT:TCADD:LAND:LSHFT:LCOM
   .DATA  ROOT: .FCTR ROOT1-ROOT2-ROOT3
;
  .DATA ; BUILD OVERLAY 1
   .DATA  BRNCH1: .FCTR BRCH11-LB:'$LUIC'LIB100/LB
   .DATA  BRCH11: .FCTR SIM100/LB:APD:LODINP:INCODE:PAKRG:FPOUT:FPINPT
  .DATA ; BUILD BRANCH 2
   .DATA  BRNCH2: .FCTR BRCH21-LB:'$LUIC'LIB100/LB:DUTIL
   .DATA  BRCH21: .FCTR SIM100/LB:APSIM:CLOCK:FPADD:FPMUL:INTRPT
   .DATA .END
    .CLOSE
;
 TKB @SIM100
 PIP SIM100.TSK/PU
;
; DELETE INTERMEDIATE FILES
;
 PIP SIM100.OLB;*,SIM100.OBJ;*,SIM100.CMD;*,SIM100.ODL;*/DE
 .EXIT
